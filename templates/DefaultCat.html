<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Default Cat 3a</title>
    <script src="../static/scripts/requests.js"></script>
</head>

<body>
<p>This is where you are going to pick a category</p>
<select id="category">

</select>

<button type="button" id="submitCat" onclick="submitCat()">Submit</button>
<a id="nextPage" href="ShowPin.html" hidden></a>
<!-- ip above will not stay static -->
<script>

    let xhr = new XMLHttpRequest();
    xhr.responseType="json";
    xhr.onreadystatechange=function(){
        if (xhr.readyState===XMLHttpRequest.DONE){
            let options=xhr.response;
            let select = document.getElementById("category");
            // Optional: Clear all existing options first:
            select.innerHTML = "";
            // Populate list with options:
            for (let i = 0; i < options.length; i++) {
                let opt = options[i];
                select.innerHTML += "<option value=\"" + opt + "\">" + opt + "</option>";
            }
        };
    };
    xhr.open('GET','http://192.168.0.102:5000/categories/');
    xhr.send();









    function submitCat() {
        let e = document.getElementById("category");
        let selectedCat = e.options[e.selectedIndex].value;
        localStorage.setItem("category",selectedCat);
        pin= postRequest(selectedCat, 'http://192.168.0.102:5000/games/');
        localStorage.setItem('pin',pin);
        //document.getElementById('nextPage').click();
    }


    //Make it so it just saves the selected variable, and have a button that logs the result to check, no need to print the
    //varaible, also fix variable names
</script>
</body>
</html>